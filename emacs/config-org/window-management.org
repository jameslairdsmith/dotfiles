#+PROPERTY: header-args:emacs-lisp :results output silent
* Window management 

** Display buffer alist

#+begin_src 
  (setq switch-to-buffer-obey-display-actions nil)
  ;(setq switch-to-buffer-in-dedicated-window "pop")

  ; (add-to-list
  ;  'display-buffer-alist
  ;  '("\\*jls" (display-buffer-reuse-window
  ;     display-buffer-pop-up-window)))

  (add-to-list
   'display-buffer-alist
   '("\\*helpful"
     (display-buffer-in-side-window)
     (window-width . 95)
     (side . right)))

  (add-to-list
   'display-buffer-alist
   '("\\*Warnings\\*" (display-buffer-in-side-window) (side . right)))

  (add-to-list
   'display-buffer-alist
   '("\\*R"
     display-buffer-in-direction
     (direction . bottom)
     (window . root)
     (window-height . 0.3)))
#+end_src

#+begin_src emacs-lisp
(setq display-buffer-alist '())

(add-to-list
 'display-buffer-alist
 '("\\*helpful" (display-buffer-reuse-mode-window
    display-buffer-in-direction)
   (direction . right) (window-width . 95)))

(add-to-list
 'display-buffer-alist
 '("\\*R" display-buffer-in-direction (direction . right)))
#+end_src

** Popper

#+begin_src emacs-lisp
;  (use-package popper
;    :ensure t 
;    :bind (("C-`"   . popper-toggle-latest)
;	   ("M-`"   . popper-cycle)
;	   ("C-M-`" . popper-toggle-type))
;    :init
;    (setq popper-reference-buffers
;	  '("\\*Messages\\*"
;	    "Output\\*$"
;	    "\\*helpful"
;	    "\\*Async Shell Command\\*"
;	    help-mode
;	    compilation-mode))
;    (popper-mode +1)
;    (popper-echo-mode +1)) 
#+end_src

** Custom map

#+begin_src emacs-lisp
(defhydra
 hydra-window-nav
 (evil-normal-state-map "<backspace>")
 "A way to navigate windows"
 ("h" windmove-left "left")
 ("j" windmove-down "down")
 ("k" windmove-up "up")
 ("s" hydra-window-splits/body "splits" :exit t)
 ("d" delete-window "delete")
 ("l" windmove-right "right"))
#+end_src


Thanks to [[https://www.reddit.com/r/emacs/comments/nirg67/nesting_hydras/][this answer]] on Reddit, I worked out how to do hydra juggling.

** Splitting

We can do the splitting in a separate hydra.

Firstly might just need to define a left split. With thanks to [[https://emacs.stackexchange.com/questions/53848/c-x-3-open-a-new-buffer-to-the-left-of-the-current-buffer][this answer on SO]].

Actually, it seems the problem of left splitting is [[https://www.emacswiki.org/emacs/TransposeWindows][harder than I thought]].

#+begin_src emacs-lisp
(defun split-window-left (&optional size)
  "Like split-window-right, with selected window on the right."
  (interactive "P")
  (split-window-right size)
  (other-window 1))
#+end_src


#+begin_src emacs-lisp
(defhydra
 hydra-window-splits
 (nil nil)
 "Window splits"
 ("l" split-window-right "right")
 ("h" split-window-left "left")
 ("j" split-window-below "below"))
#+end_src

